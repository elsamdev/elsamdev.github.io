<html><head><base href="https://advanced-mage-sprite-generator.example.com/">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Advanced Pixel Art Mage Sprite Generator</title>
<style>
  body {
    font-family: 'Courier New', monospace;
    background-color: #1a1a2e;
    color: #e0e0e0;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
  }
  h1 {
    color: #00ff99;
    text-shadow: 2px 2px 4px rgba(0, 255, 153, 0.3);
  }
  #canvas {
    border: 2px solid #00ff99;
    background-color: #0f0f1a;
  }
  #controls {
    margin-top: 20px;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
  }
  button {
    background-color: #00ff99;
    color: #1a1a2e;
    border: none;
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
    transition: all 0.3s;
  }
  button:hover {
    background-color: #00cc7a;
    transform: translateY(-2px);
  }
</style>
</head>
<body>
  <h1>Advanced Pixel Art Mage Sprite Generator</h1>
  <canvas id="canvas" width="64" height="64"></canvas>
  <div id="controls">
    <button onclick="generateSprite()">Generate New Mage</button>
    <button onclick="downloadSprite()">Download Sprite</button>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.5/seedrandom.min.js"></script>
  <script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const pixelSize = 4;
    const spriteSize = 16;
    let currentSprite;

    const colors = {
      skin: ['#ffdab9', '#f0e68c', '#d2691e', '#8b4513', '#ffe4b5'],
      hair: ['#ffd700', '#8b4513', '#a0522d', '#c0c0c0', '#36454f', '#800000', '#4b0082'],
      robe: ['#4169e1', '#9932cc', '#228b22', '#b22222', '#4b0082', '#800080', '#008080'],
      shoes: ['#8b4513', '#36454f', '#800000', '#4b0082', '#000000']
    };

    function randomChoice(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function drawPixel(x, y, color) {
      ctx.fillStyle = color;
      ctx.fillRect(x * pixelSize, y * pixelSize, pixelSize, pixelSize);
    }

    function generateSprite() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      currentSprite = [];

      const skinColor = randomChoice(colors.skin);
      const hairColor = randomChoice(colors.hair);
      const robeColor = randomChoice(colors.robe);
      const shoesColor = randomChoice(colors.shoes);

      // Generate head
      for (let y = 2; y < 6; y++) {
        for (let x = 6; x < 10; x++) {
          drawPixel(x, y, skinColor);
          currentSprite.push({x, y, color: skinColor});
        }
      }

      // Generate hair (more styles)
      const hairStyle = Math.floor(Math.random() * 4);
      switch (hairStyle) {
        case 0: // Short hair
          for (let y = 1; y < 3; y++) {
            for (let x = 5; x < 11; x++) {
              drawPixel(x, y, hairColor);
              currentSprite.push({x, y, color: hairColor});
            }
          }
          break;
        case 1: // Long hair
          for (let y = 1; y < 8; y++) {
            for (let x = 5; x < 11; x++) {
              if (y < 3 || (x > 5 && x < 10)) {
                drawPixel(x, y, hairColor);
                currentSprite.push({x, y, color: hairColor});
              }
            }
          }
          break;
        case 2: // Messy hair
          for (let y = 0; y < 4; y++) {
            for (let x = 4; x < 12; x++) {
              if (Math.random() > 0.3) {
                drawPixel(x, y, hairColor);
                currentSprite.push({x, y, color: hairColor});
              }
            }
          }
          break;
        case 3: // Bald with beard
          for (let y = 5; y < 7; y++) {
            for (let x = 5; x < 11; x++) {
              drawPixel(x, y, hairColor);
              currentSprite.push({x, y, color: hairColor});
            }
          }
          break;
      }

      // Generate robe
      for (let y = 6; y < 14; y++) {
        for (let x = 4; x < 12; x++) {
          if (Math.random() > 0.2) {
            drawPixel(x, y, robeColor);
            currentSprite.push({x, y, color: robeColor});
          }
        }
      }

      // Generate feet
      for (let y = 14; y < 16; y++) {
        for (let x = 5; x < 11; x++) {
          if (x < 8) {
            drawPixel(x, y, shoesColor);
            currentSprite.push({x, y, color: shoesColor});
          } else if (x > 8) {
            drawPixel(x, y, shoesColor);
            currentSprite.push({x, y, color: shoesColor});
          }
        }
      }

      // Generate staff
      const staffStyle = Math.floor(Math.random() * 3);
      switch (staffStyle) {
        case 0: // Simple staff
          for (let y = 5; y < 15; y++) {
            drawPixel(3, y, '#8b4513');
            currentSprite.push({x: 3, y, color: '#8b4513'});
          }
          drawPixel(2, 4, '#ffd700');
          currentSprite.push({x: 2, y: 4, color: '#ffd700'});
          drawPixel(3, 3, '#ffd700');
          currentSprite.push({x: 3, y: 3, color: '#ffd700'});
          drawPixel(4, 4, '#ffd700');
          currentSprite.push({x: 4, y: 4, color: '#ffd700'});
          break;
        case 1: // Crystal staff
          for (let y = 5; y < 15; y++) {
            drawPixel(3, y, '#8b4513');
            currentSprite.push({x: 3, y, color: '#8b4513'});
          }
          drawPixel(2, 3, '#00ffff');
          currentSprite.push({x: 2, y: 3, color: '#00ffff'});
          drawPixel(3, 2, '#00ffff');
          currentSprite.push({x: 3, y: 2, color: '#00ffff'});
          drawPixel(4, 3, '#00ffff');
          currentSprite.push({x: 4, y: 3, color: '#00ffff'});
          drawPixel(3, 4, '#00ffff');
          currentSprite.push({x: 3, y: 4, color: '#00ffff'});
          break;
        case 2: // Flame staff
          for (let y = 5; y < 15; y++) {
            drawPixel(3, y, '#8b4513');
            currentSprite.push({x: 3, y, color: '#8b4513'});
          }
          drawPixel(2, 3, '#ff4500');
          currentSprite.push({x: 2, y: 3, color: '#ff4500'});
          drawPixel(3, 2, '#ff4500');
          currentSprite.push({x: 3, y: 2, color: '#ff4500'});
          drawPixel(4, 3, '#ff4500');
          currentSprite.push({x: 4, y: 3, color: '#ff4500'});
          drawPixel(3, 4, '#ff0000');
          currentSprite.push({x: 3, y: 4, color: '#ff0000'});
          break;
      }
    }

    function downloadSprite() {
      const link = document.createElement('a');
      link.download = 'advanced_mage_sprite.png';
      link.href = canvas.toDataURL();
      link.click();
    }

    // Generate initial sprite
    generateSprite();
  </script>
</body></html>