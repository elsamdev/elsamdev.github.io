<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>slider</title>
</head>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
    @font-face {
        font-family: 'BetmRounded';
        src: url('fonts/BetmRounded-Black.ttf') format('truetype')
            /* Black */
            ,
            url('fonts/BetmRounded-ExtraBlack.ttf') format('truetype')
            /* ExtraBlack */
            ,
            url('fonts/BetmRounded-Regular.ttf') format('truetype')
            /* Regular */
            ,
            url('fonts/BetmRounded-SemiBold.ttf') format('truetype')
            /* SemiBold */
            ,
            url('fonts/BetmRounded-SemiLight.ttf') format('truetype')
            /* SemiLight */
        ;
    }

    :root {
        --gradient-color: linear-gradient(0deg, rgba(214, 220, 232, 1) 0%, rgba(200, 205, 216, 1) 0%);
        --maingray-color: #d6dce8;
        --maingray-color-reverse: #c8cdd8;
        --main-color: #ee0451;
        --lightbg-color: #eef4f7;
        --yellow-color: #ffd400;
        --darklight-color: #dde5ee;
        --darkblack-color: #171717;
        --lightblack-color: #2a2a2a;
        --ultralightblakc-color: #3f3f51;
        --darkwhite-color: #dde5ee;
        --purlple-color: #654eb2;
        --green-color: #16bb77;
        --red-color: #eb2743;
    }

    * {
        box-sizing: border-box;
        padding: 0;
        margin: 0;
    }

    i,
    h1,
    h2,
    p,
    h3,
    img {
        /* evitar que seleccionen */
        user-select: none;
    }

    html {
        height: 100%;
        overflow: hidden;
    }

    body {
        display: flex;
        flex-direction: column;
        justify-content: space-around;
        font-family: 'BetmRounded', sans-serif;
        padding: 0;
        margin: 0;
        background-color: var(--lightbg-color);
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
        position: relative;
    }


    /* screen game */
    .game {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
        height: 100%;
        min-height: 70%;
        max-height: 70%;
        background-color: var(--lightbg-color);

        position: relative;
    }


    /* barra recursos */
    .coin {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
        width: 100%;
        height: 100%;
        max-height: 3vh;
        background-color: var(--lightbg-color);
        position: absolute;
        bottom: 0;
        right: 0;
    }

    .coins {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: row;
        justify-content: flex-end;
        align-items: center;

    }



    .recursos {
        display: flex;
        position: relative;
        height: 100%;
        overflow: hidden;
    }



    .recurso-relleno {
        content: "hola";
        height: 100%;
        width: 25%;
        background-color: var(--green-color);
        color: white;
        position: absolute;
        left: 0;
        transition: all 0.5s ease;
    }

    .recursos-item {
        min-width: 50px;
        display: flex;
        justify-content: flex-end;
        height: 100%;

        align-items: center;
        gap: 2px;
        padding: 1px 7px;
        position: relative;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .recursos-item img {
        height: 7px;
    }

    .recursos-item.active {
        border: 2px solid var(--darkwhite-color);
        color: white;
        transition: all 0.3s ease;
        animation: fadeIn 0.3s ease 1;
    }

    @keyframes fadeIn {
        0% {
            opacity: 0;
            transform: scale(2);
        }

        100% {
            opacity: 1;
            transform: scale(1);
        }
    }

    /* Estilos para el SVG dentro de .recursos-item.active */
    .recursos-item.active svg {
        width: 10px;
        height: 10px;
        transition: all 0.3s ease;
    }

    /* Estilos para el elemento .numero dentro de .recursos-item.active */
    .recursos-item.active .numero {
        font-size: 10px;
        font-weight: 500;
        letter-spacing: 1px;
        transition: all 0.3s ease;
    }

    .recursos-item svg {
        width: 12px;
        /* Tamaño del ícono */
        height: 12px;
        /* Tamaño del ícono */
        margin-right: 2px;
        /* Espacio entre el número y el ícono */
        font-weight: 900;
        transition: all 0.3s ease;
    }



    .recursos-item .numero {
        font-size: 12px;
        /* Tamaño del número */
        /* Estilo del número */
        font-weight: 300;
        letter-spacing: 1px;
        transition: all 0.3s ease;
    }

    .icon-menu {
        color: var(--green-color);
        width: 40px;
        position: absolute;
        top: 10px;
        left: 10px;
        font-size: 30px;
    }

    /************** SLIDER **************/
    .slider-container {
        width: 100%;
        overflow: hidden;
        height: 100%;
        /* position: absolute;
        bottom: 0; */
        background-color: var(--maingray-color);
    }

    .slider {
        display: flex;
        transition: transform 0.3s ease-out;
        /* Make transitions smooth */
        will-change: transform;
        cursor: grab;
        height: 100%;
    }

    .slider-item {
        flex: 0 0 33.33%;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        font-size: 24px;
        text-align: center;
        color: var(--lightblack-color);
        font-size: 24px;
        background-color: var(--maingray-color);
        /* border: 1px solid var(--lightblack-color); */
        padding: 20px 0;
        gap: 20px;
    }

    .grabbing {
        cursor: grabbing;
    }



    .icon {
        flex: 1;
        font-size: 48px;
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
        max-height: 45%;
        /* background-color: var(--main-color); */
        position: relative;

    }

    .icon button {
        font-weight: 600;
    }

    .primary-button {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        width: 90%;
        height: 100%;
        border: none;
        background-color: var(--green-color);
        color: var(--maingray-color);
        font-weight: 300;
        font-size: 20px;
        cursor: pointer;
        border-radius: 10px;
        border: #029357 solid 4px;
        box-shadow: 0px 5px #046d41, inset 0px 0px 0px 2px #2fd792;
        /* position: absolute; */
        transform: none;
        bottom: 90px;
    }


    .primary-button-yellow {
        background-color: #b4a262;
        border: #fec902 solid 4px;
        box-shadow: 0px 5px #be8d15, inset 0px 0px 0px 2px #fee15a;
    }

    .primary-button-blue {
        background-color: #1c9cd3;
        border: #1c9cd3 solid 4px;
        box-shadow: 0px 5px #2178a0, inset 0px 0px 0px 2px #41b8f7;
    }

    .primary-button-black {
        background-color: var(--darkblack-color);
        border: var(--lightblack-color) solid 4px;
        box-shadow: 0px 5px var(--darkblack-color), inset 0px 0px 0px 2px var(--ultralightblakc-color);
    }


    .icon i {
        position: absolute;
        transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.320, 1.275);

    }

    .action-button {
        position: absolute;
        padding: 20px 21px;
        background-color: var(--green-color);
        border: none;

        color: #000;
        font-weight: bold;
        text-align: center;
        text-decoration: none;
        transition: background-color 0.3s ease;
        cursor: pointer;
        right: 0;
        bottom: 25px;
    }

    .action-button:focus {
        outline: none;
        background-color: var();
    }

    .button-container {
        width: 100%;
        height: 45%;
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;

    }

    .button {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        width: 90%;
        height: 100%;
        border: none;
        background-color: var(--maingray-color);
        color: var(--lightblack-color);
        font-weight: 300;
        font-size: 20px;
        cursor: pointer;
        border-radius: 10px;
        border: #029357 solid 4px;
        box-shadow: 0px 5px #046d41, inset 0px 0px 0px 2px #2fd792;
        /* position: absolute; */
        transform: none;
        top: -40px;
    }


    .button-yellow {
        border: #fec902 solid 4px;
        box-shadow: 0px 5px #be8d15, inset 0px 0px 0px 2px #fee15a;
    }

    .button-blue {
        border: #1c9cd3 solid 4px;
        box-shadow: 0px 5px #2178a0, inset 0px 0px 0px 2px #41b8f7;
    }

    .button-black {
        border: var(--lightblack-color) solid 4px;
        box-shadow: 0px 5px var(--darkblack-color), inset 0px 0px 0px 2px var(--ultralightblakc-color);
    }


    .navigation {
        width: 100%;
        min-height: 100px;
        height: 100px;
        max-height: 100px;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        gap: 10px;
        /* background-color: var(--maingray-color); */
        position: absolute;
        bottom: -80px;
        transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.320, 1.275);
    }



    .navigation-container {
        width: 100%;
        min-height: 100%;
        height: 100%;
        max-height: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .navigation-button-container {
        width: 33.33%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 10px;
        transition: all 0.3s cubic-bezier(.47, 1.64, .41, .8);
    }

    .navigation-container button {
        position: relative;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        width: 90%;
        height: 80%;
        border: none;
        background-color: var(--maingray-color);
        color: var(--lightblack-color);
        font-weight: 300;
        font-size: 20px;
        cursor: pointer;
        border-radius: 10px;
        border: var(--lightblack-color) solid 2px;
        box-shadow: 0px 4px 0px var(--darkblack-color), inset 0px 0px 0px 2px var(--ultralightblakc-color);
        transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.320, 1.275);
        opacity: 0;
    }


    .navigation-container .navigation-center img {
        height: 30% !important;
    }

    .navigation-container .navigation-left img {

        height: 40% !important;
    }

    .navigation-container .navigation-right img {

        height: 40% !important;
    }



    .navigation-container button:active {
        background-color: var(--maingray-color-reverse);
    }

    .animate-button {
        transition: top .2s cubic-bezier(0.175, 0.885, 0.320, 1.275);
    }

    @media (min-width: 536px) {
        .primary-button {
            width: 93%;
        }

        .button {
            width: 93%;
        }

        .navigation-container button {
            width: 93%;
        }
    }

    @media (min-width: 768px) {
        .primary-button {
            width: 95%;
        }

        .button {
            width: 95%;
        }

        .navigation-container button {
            width: 95%;
        }
    }

    @media (min-width: 958px) {
        .primary-button {
            width: 96%;
        }

        .button {
            width: 96%;
        }

        .navigation-container button {
            width: 96%;
        }
    }
</style>

<body>
    <div class="game">
        <i class="fa-solid fa-bars icon-menu"></i>
        <button class="action-button">
            <i class="fa-solid fa-khanda"></i>
        </button>

        <div class="coin">
            <div class="coins">
                <div class="recursos">
                    <div class="recurso-relleno"></div>
                    <div class="soldados recursos-item">
                        <img src="sword.png" alt="sword">
                        <p class="numero point-soldier">0</p>
                    </div>
                    <div class="comida recursos-item">
                        <img src="sword.png" alt="sword">
                        <p class="numero point-food">999</p>
                    </div>
                    <div class="madera recursos-item">
                        <img src="sword.png" alt="sword">
                        <p class="numero point-wood">300</p>
                    </div>
                    <div class="obrero recursos-item">
                        <img src="sword.png" alt="sword">
                        <p class="numero point-slaves">600</p>
                    </div>
                </div>
            </div>

        </div>
    </div>


    <div class="slider-container">
        <div class="slider" id="slider">
            <div class="slider-item">
                <div class="icon">
                    <button onclick="buttonClicked(event, 'green', 'up')" class="primary-button primary-button-green">
                        <!-- <i class="fas fa-heart"></i> -->
                        Power
                    </button>
                </div>
                <div class="button-container">
                    <button onclick="buttonClicked(event, 'green', 'center')"
                        class="animate-button button button-green">
                        <i class="fas fa-space-shuttle"></i>Botón
                    </button>
                </div>
            </div>
            <div class="slider-item">
                <div class="icon">
                    <button onclick="buttonClicked(event, 'green', 'up')" class="primary-button primary-button-green">
                        <!-- <i class="fas fa-rocket"></i> -->
                        Life
                    </button>
                </div>
                <div class="button-container">
                    <button onclick="buttonClicked(event, 'green', 'center')"
                        class="animate-button button button-green">
                        <i class="fas fa-heart"></i>Botón
                    </button>
                </div>
            </div>
            <div class="slider-item">
                <div class="icon">
                    <button onclick="buttonClicked(event, 'green', 'up')" class="primary-button primary-button-green">
                        <!-- <i class="fas fa-bank"></i></button> -->
                        Rate <br> fire
                </div>
                <div class="button-container">
                    <button onclick="buttonClicked(event, 'green', 'center')"
                        class="animate-button button button-green">
                        <i class="fas fa-bank"></i>Botón
                    </button>
                </div>
            </div>


            <div class="slider-item">
                <div class="icon">
                    <button onclick="buttonClicked(event, 'blue', 'up')" class="primary-button primary-button-blue">
                        <!-- <i class="fas fa-heart"></i> -->
                        Arco
                    </button>
                </div>
                <div class="button-container">
                    <button onclick="buttonClicked(event, 'blue', 'center')" class="animate-button button button-blue">
                        <i class="fas fa-heart"></i>Botón
                    </button>
                </div>
            </div>
            <div class="slider-item">
                <div class="icon">
                    <button onclick="buttonClicked(event, 'blue', 'up')" class="primary-button primary-button-blue">
                        <!-- <i class="fas fa-rocket"></i> -->
                        Cañon
                    </button>
                </div>
                <div class="button-container">
                    <button onclick="buttonClicked(event, 'blue', 'center')" class="animate-button button button-blue">
                        <i class="fas fa-space-shuttle"></i>Botón
                    </button>
                </div>
            </div>
            <div class="slider-item">
                <div class="icon">
                    <button onclick="buttonClicked(event, 'blue', 'up')" class="primary-button primary-button-blue">
                        <!-- <i class="fas fa-bank"></i> -->
                        Espada
                    </button>
                </div>
                <div class="button-container">
                    <button onclick="buttonClicked(event, 'blue', 'center')" class="animate-button button button-blue">
                        <i class="fas fa-bank"></i>Botón
                    </button>
                </div>
            </div>

            <div class="slider-item">
                <div class="icon">
                    <button onclick="buttonClicked(event, 'yellow', 'up')" class="primary-button primary-button-yellow">
                        <!-- <i class="fas fa-heart"></i> -->
                        Madera
                    </button>
                </div>
                <div class="button-container">
                    <button onclick="buttonClicked(event, 'yellow', 'center')"
                        class="animate-button button button-yellow">
                        <i class="fas fa-heart"></i>Botón
                    </button>
                </div>
            </div>
            <div class="slider-item">
                <div class="icon">
                    <button onclick="buttonClicked(event, 'yellow', 'up')" class="primary-button primary-button-yellow">
                        <!-- <i class="fas fa-rocket"></i> -->
                        Comida
                    </button>
                </div>
                <div class="button-container">
                    <button onclick="buttonClicked(event, 'yellow', 'center')"
                        class="animate-button button button-yellow">
                        <i class="fas fa-space-shuttle"></i>Botón
                    </button>
                </div>
            </div>
            <div class="slider-item">
                <div class="icon">
                    <button onclick="buttonClicked(event, 'yellow', 'up')" class="primary-button primary-button-yellow">
                        <!-- <i class="fas fa-bank"></i> -->
                        Piedra
                    </button>
                </div>
                <div class="button-container">
                    <button onclick="buttonClicked(event, 'yellow', 'center')"
                        class="animate-button button button-yellow">
                        <i class="fas fa-bank"></i>Botón
                    </button>
                </div>
            </div>

            <div class="slider-item">
                <div class="icon">
                    <button onclick="buttonClicked(event, 'black', 'up')" class="primary-button primary-button-black">
                        <!-- <i class="fas fa-heart"></i> -->
                        FA
                    </button>
                </div>
                <div class="button-container">
                    <button onclick="buttonClicked(event, 'black', 'center')"
                        class="animate-button button button-black">
                        <i class="fas fa-heart"></i>Botón
                    </button>
                </div>
            </div>
            <div class="slider-item">
                <div class="icon">
                    <button onclick="buttonClicked(event, 'black', 'up')" class="primary-button primary-button-black">
                        <!-- <i class="fas fa-rocket"></i> -->
                        Entrenar
                    </button>
                </div>
                <div class="button-container">
                    <button onclick="buttonClicked(event, 'black', 'center')"
                        class="animate-button button button-black">
                        <i class="fas fa-space-shuttle"></i>Botón
                    </button>
                </div>
            </div>
            <div class="slider-item">
                <div class="icon">
                    <button onclick="buttonClicked(event, 'black', 'up')" class="primary-button primary-button-black">
                        <!-- <i class="fas fa-bank"></i> -->
                        Descansar
                    </button>
                </div>
                <div class="button-container">
                    <button onclick="buttonClicked(event, 'black', 'center')"
                        class="animate-button button button-black">
                        <i class="fas fa-bank"></i>Botón
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="navigation" id="navigation" style="transform: translateY(0px)">
        <div class="navigation-container">
            <div class="navigation-button-container">
                <button onclick="buttonClicked(event, 'black')" class="animate-button navigation-left">
                    <img src="img/arrow-left.png" alt="">
                </button>
            </div>
            <div class="navigation-button-container">
                <button onclick="buttonClicked(event, 'black')" class="animate-button navigation-center">
                    <img src="img/arrow-up.png" alt="">
                </button>
            </div>
            <div class="navigation-button-container">
                <button onclick="buttonClicked(event, 'black')" class="animate-button navigation-right">
                    <img src="img/arrow-right.png" alt="">
                </button>
            </div>
        </div>
    </div>


    <script>
        const navigation = document.getElementById('navigation');
        const icon = document.querySelectorAll('.primary-button');
        const buttonMain = document.querySelectorAll('.button');
        const buttonnav = document.querySelectorAll('.navigation-container button');
        let dragghash = false;
        let initialY = 80;
        document.addEventListener('DOMContentLoaded', function () {
            const slider = document.querySelector('.slider');

            let startPos = 0;
            let startTime = 0;
            let sliderWidth = slider.scrollWidth - slider.clientWidth;
            let itemWidth = slider.querySelector('.slider-item').clientWidth;
            const navigation = document.getElementById('navigation');
            navigation.style.transform = "translate(0)"
            let startPosX = 0, startPosY = 0;
            let transform = 0, lastTransform = 0;
            let velocity = 0, direction = '';
            let startY = 0, currentY = 80; // For vertical navigation movement
            const topPoint = 0;
            const bottomPoint = 1;
            let draggingAffter = null;
            let numbar = 0;
            let movementDirection = null;
            let isAtTop = false;
            let isAtBottom = true;
            let isDragging = false;
            function updateSliderWidth() {
                sliderWidth = slider.scrollWidth - slider.clientWidth;
                if (-lastTransform > sliderWidth) {
                    lastTransform = -sliderWidth;
                    slider.style.transform = `translateX(${lastTransform}px)`;
                }
            }

            window.addEventListener('resize', updateSliderWidth);

            // Unified function for handling start of interaction
            function startInteraction(startX, startY, element) {
                startPos = startX;  // Guarda la posición inicial en X cuando comienza el drag
                startPosY = startY;  // Guarda la posición inicial en Y cuando comienza el drag
                isDragging = true;

                startTime = Date.now();
                slider.classList.add('grabbing');
                slider.style.transition = 'none';
                // Remove transition for real-time tracking
                logCurrentCenteredItem();
                logSliderPercentage();
                valorTra()
            }

            // Unified function for handling movement
            function moveInteraction(currentPosX, currentPosY) {
                if (!isDragging) return;
                const dy = currentPosY - startPosY;
                const dx = currentPosX - startPos;

                if (movementDirection === null) {  // Usar null para la comprobación inicial
                    if (Math.abs(dx) > 2 || Math.abs(dy) > 2) {  // Umbral bajo para respuesta rápida

                        movementDirection = Math.abs(dx) > Math.abs(dy) ? 'horizontal' : 'vertical';
                    }
                }

                if (movementDirection === 'horizontal') {
                    if (Math.abs(dx) > 0) {
                        let tentativeTransform = lastTransform + dx;
                        velocity = dx / (Date.now() - startTime); // Calculate velocity for momentum
                        // Elastic effect
                        if (tentativeTransform > 0) {
                            tentativeTransform = dx / 5;
                        } else if (tentativeTransform < -sliderWidth) {
                            tentativeTransform = -sliderWidth + (dx / 5);
                        }

                        transform = tentativeTransform;

                        slider.style.transform = `translateX(${transform}px)`;

                    }
                } else if (movementDirection === 'vertical') {
                    // Manejar solo movimientos verticales para el slider

                    if ((isAtTop && dy > 0) || (isAtBottom && dy < 0)) {

                        // Si está en el top y el movimiento es hacia abajo, o está en el bottom y el movimiento es hacia arriba, permitir movimiento
                        moveNavigation(currentPosY);

                    }


                }

                logCurrentCenteredItem();
                logSliderPercentage();
                valorTra()

            }

            // Unified function for ending interaction
            function endInteraction(currentPosX, currentPosY) {

                if (!isDragging) return;

                isDragging = false;
                draggingAffter = true
                slider.classList.remove('grabbing');
                const dx = currentPosX - startPos;

                let newTransform;
                // Solo aplicar momentum si el desplazamiento horizontal es mayor que un umbral específico
                if (Math.abs(dx) > 20 && movementDirection === 'horizontal') {
                    newTransform = lastTransform + dx + (velocity * 100); // Momentum efectivo
                } else {
                    newTransform = lastTransform; // No hay desplazamiento significativo, se mantiene la posición
                }
                movementDirection = null;
                if (Math.abs(dx) > 20) {
                    dragghash = true;
                } else {
                    dragghash = false;
                }

                newTransform = Math.round(newTransform / itemWidth) * itemWidth;

                if (newTransform > 0) {
                    newTransform = 0;
                    logCurrentCenteredItem();
                    logSliderPercentage();

                } else if (newTransform < -sliderWidth) {
                    newTransform = -sliderWidth;

                }
                if (!draggingAffter) {

                }
                slider.style.transform = `translateX(${newTransform}px)`;
                slider.style.transition = 'all 1s cubic-bezier(0.34, 1.56, 0.64, 1)'; // Smooth deceleration
                // slider.classList.add('animating');
                lastTransform = newTransform;


                // Calcula la distancia a cada punto de anclaje
                const distanceToTop = Math.abs(currentY - topPoint);
                const distanceToBottom = Math.abs(currentY - bottomPoint);

                // Determina el punto más cercano
                const targetY = distanceToTop < distanceToBottom ? topPoint : bottomPoint;

                if (targetY === topPoint) {
                    ajustarElementos();
                    isAtTop = true;
                    isAtBottom = false;
                } else if (targetY === bottomPoint) {
                    restablecerElementos();
                    isAtTop = false;
                    isAtBottom = true;
                }

                // Mueve el botón al punto más cercano con una transición suave
                navigation.style.transition = 'transform 0.2s cubic-bezier(0.175, 0.885, 0.320, 1.275)';
                navigation.style.transform = `translateY(${targetY - initialY}px)`;
                currentY = targetY;

                // Remove animating class after the animation ends
                slider.addEventListener('transitionend', () => {
                    slider.classList.remove('animating');
                    logCurrentCenteredItem();
                    logSliderPercentage();
                    valorTra()
                    draggingAffter = false
                }, { once: true });

                logCurrentCenteredItem();
                logSliderPercentage();
                valorTra()
            }

            function moveNavigation(currentPosY) {
                buttonnav.forEach(button => {
                    button.style.opacity = '1';
                });

                let moveY = currentPosY - startPosY;


                let dy = currentY - initialY;

                let resistanceFactor = isAtTop ? 2 - Math.abs(dy) / 500 : 6 + Math.abs(dy) / 2000;
                resistanceFactor = Math.max(1, resistanceFactor);

                currentY += moveY / resistanceFactor;
                if (currentY > initialY) currentY = initialY;

                startPosY = currentPosY;
                let distanceFactorMain = isAtTop ? 40 : 0;
                let distanceFactorIcon = isAtTop ? 70 : 0;
                // let distance = currentY - initialY;


                buttonMain.forEach(function (elemento) {
                    elemento.style.transform = `translateY(${currentY - initialY + distanceFactorMain}px`;
                });

                icon.forEach(function (elemento) {
                    elemento.style.transform = `translateY(${currentY - initialY + distanceFactorIcon}px)`;
                });

                navigation.style.transform = `translateY(${currentY - initialY}px)`;

            }


            function logCurrentCenteredItem() {
                const centerPosition = -transform + (slider.clientWidth / 2);
                const centeredItemIndex = Math.floor(centerPosition / itemWidth);
            }

            function logSliderPercentage() {
                const percentage = (Math.abs(transform) / sliderWidth) * 100;
            }


            slider.addEventListener('mousedown', e => startInteraction(e.clientX, e.clientY, slider));
            navigation.addEventListener('mousedown', e => startInteraction(e.clientX, e.clientY, navigation));
            window.addEventListener('mousemove', e => moveInteraction(e.clientX, e.clientY));
            window.addEventListener('mouseup', e => endInteraction(e.clientX, e.clientY));

            // Touch events
            slider.addEventListener('touchstart', e => startInteraction(e.touches[0].clientX, e.touches[0].clientY, slider));
            navigation.addEventListener('touchstart', e => startInteraction(e.touches[0].clientX, e.touches[0].clientY, navigation));
            window.addEventListener('touchmove', e => moveInteraction(e.touches[0].clientX, e.touches[0].clientY));
            window.addEventListener('touchend', e => {
                if (e.changedTouches && e.changedTouches.length > 0) {
                    endInteraction(e.changedTouches[0].clientX, e.changedTouches[0].clientY);
                }
            });


            /////////////////////////////////////////

            /////////*********** re ajustar elementos ******************//////
            //////////////////////////
            function ajustarElementos() {
                icon.forEach(function (elemento) {
                    elemento.style.transition = 'all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)';
                    elemento.style.transform = 'translateY(-10px)';
                    elemento.style.height = '75%';
                });

                buttonMain.forEach(function (elemento) {
                    elemento.style.transition = 'all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)';
                    // elemento.style.top = '-55px';
                    elemento.style.height = '75%';
                    elemento.style.transform = 'translateY(-40px)';
                });

                buttonnav.forEach(function (elemento) {
                    elemento.style.transition = 'all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)';
                    elemento.style.transform = 'none';
                    elemento.style.height = '60%';
                    elemento.style.transform = 'translateY(4px)';
                });

                navigation.style.minHeight = '80px';
                navigation.style.maxHeight = '80px';
                navigation.style.height = '80px';
                isAtTop = false;
                initialY = 80;
            }

            function restablecerElementos() {
                icon.forEach(function (elemento) {
                    elemento.style.transition = 'all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)';
                    elemento.style.transform = 'none';
                    elemento.style.height = '100%';
                });

                buttonMain.forEach(function (elemento) {
                    elemento.style.transition = 'all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)';
                    // elemento.style.top = '0';
                    elemento.style.height = '100%';
                    elemento.style.transform = 'translateY(0px)';
                });


                buttonnav.forEach(function (elemento) {
                    elemento.style.transition = 'all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)';
                    elemento.style.transform = 'translateY(10px)';
                    elemento.style.height = '80%';
                });

                navigation.style.minHeight = '100px';
                navigation.style.maxHeight = '100px';
                navigation.style.height = '100px';
                isAtBottom = false;
                initialY = 0;
            }
            ///////////////********BOTONES********** *///////////////



        });
        const buttonStyles = {
            green: {
                border: '#029357 solid 4px',
                boxShadow: '0px 5px #046d41, inset 0px 0px 0px 2px #2fd792'
            },
            yellow: {
                border: '#fec902 solid 4px',
                boxShadow: '0px 5px #be8d15, inset 0px 0px 0px 2px #fee15a'
            },
            blue: {
                border: '#1c9cd3 solid 4px',
                boxShadow: '0px 5px #2178a0, inset 0px 0px 0px 2px #41b8f7'
            },
            black: {
                border: 'var(--lightblack-color) solid 4px',
                boxShadow: '0px 5px var(--darkblack-color), inset 0px 0px 0px 2px var(--ultralightblakc-color)'
            }
        };

        function buttonClicked(event, color, btn) {
            const button = event.currentTarget; // Esto asegura que siempre es el botón

            if (!dragghash) {
                if (initialY === 0) {
                    translateDown = 0;
                    translateUp = 5;
                } else {
                    if (btn === 'center') {
                        translateDown = -40;
                        translateUp = -35;
                    } else if (btn === 'up') {
                        translateDown = -10;
                        translateUp = -5;
                    } else { // Cualquier otro valor de btn
                        translateDown = 4;
                        translateUp = 9;
                    }
                }
                console.log('Button click detected');
                button.style.transform = `translateY(${translateUp}px)`;
                console.log(translateUp + "px")
                setTimeout(() => {
                    button.style.boxShadow = 'none';
                }, 20);
                setTimeout(() => {
                    button.style.transform = `translateY(${translateDown}px)`;
                    button.style.boxShadow = buttonStyles[color].boxShadow;

                }, 50); // Tiempo para la animación de clic
            } else {
                console.log('Drag detected, button click ignored');
                // No cambia nada si fue drag
            }

        }

        ////////////////////********Recursos**********/////////////////////////
        const relleno = document.querySelector('.recurso-relleno');

        function changeNumberValue(element, targetValue, duration) {
            const startValue = parseInt(element.textContent);
            const increment = (targetValue - startValue) / (duration / 10);
            let currentValue = startValue;

            const interval = setInterval(function () {
                currentValue += increment;
                element.textContent = Math.round(currentValue);

                if ((increment > 0 && currentValue >= targetValue) || (increment < 0 && currentValue <= targetValue)) {
                    element.textContent = targetValue;
                    clearInterval(interval);
                }
            }, 10);
        }

        const soldierNumber = document.querySelector('.point-soldier');
        const foodNumber = document.querySelector('.point-food');
        const woodNumber = document.querySelector('.point-wood');
        const slavesNumber = document.querySelector('.point-slaves');
        const actionButton = document.querySelector('.action-button');

        actionButton.addEventListener('click', function () {
            changeNumberValue(soldierNumber, generateRandomNumber(), 2000); // Cambiar gradualmente a 500 en 2 segundos
            changeNumberValue(foodNumber, generateRandomNumber(), 2000); // Cambiar gradualmente a 750 en 1.5 segundos
            changeNumberValue(woodNumber, generateRandomNumber(), 2000); // Cambiar gradualmente a 1000 en 1 segundo
            changeNumberValue(slavesNumber, generateRandomNumber(), 2000); // Cambiar gradualmente a 250 en 2.5 segundos

        });

        function generateRandomNumber() {
            return Math.floor(Math.random() * 1000);
        }

        //////function obtener valor del trnalaste
        function valorTra() {
            const sliderElement = document.getElementById('slider');
            const style = window.getComputedStyle(sliderElement);
            const matrixString = style.getPropertyValue('transform');

            let translateX = 0; // Valor predeterminado si no se encuentra coincidencia

            // Verifica si matrixString es válido y extrae translateX
            if (matrixString && matrixString !== 'none') {
                const matrixMatch = matrixString.match(/matrix.*\((.+)\)/);
                if (matrixMatch) {
                    const values = matrixMatch[1].split(', ');
                    translateX = parseFloat(values[4]);
                }
            }

            // Calcula el ancho del slider
            const sliderWidth = sliderElement.clientWidth;
            const scrollLeft = sliderElement.scrollLeft;

            // Determina la posición total que el slider puede desplazarse
            const maxTranslateX = -(sliderElement.scrollWidth - sliderWidth);

            // Calcula el porcentaje de translateX
            const porcentaje = ((translateX - scrollLeft) / maxTranslateX) * 100;

            // Limita el porcentaje entre 0 y 100
            const porcentajeLimitado = Math.max(0, Math.min(100, porcentaje));
            let porcentajeFinal = 0;
            let movFinal = 0
            let herOne = 0
            if (porcentajeLimitado <= 25 && herOne !== 0) {
                porcentajeFinal = 0
                herOne, movFinal = 0
            } else if (porcentajeLimitado >= 25 && porcentajeLimitado <= 50 && herOne !== 1) {
                porcentajeFinal = 25
                herOne, movFinal = 1
            } else if (porcentajeLimitado >= 50 && porcentajeLimitado <= 75 && herOne !== 2) {
                porcentajeFinal = 50
                herOne, movFinal = 2
            } else if (porcentajeLimitado >= 75 && herOne !== 3) {
                porcentajeFinal = 75
                herOne, movFinal = 3
            }

            relleno.style.left = porcentajeFinal + '%';
            document.querySelectorAll('.recursos-item').forEach(item => {
                item.classList.remove('active');
            });

            // Agregar la clase active al elemento actual
            document.querySelectorAll('.recursos-item')[movFinal].classList.add('active');
        }

    </script>
</body>

</html>